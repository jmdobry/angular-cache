!function(a,b){"use strict";function c(){this.$get=function(){function a(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=c);return b}function c(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function d(d,e){function g(){var a="";return m.capacity&&(b.isNumber(m.capacity)||(a+="capacity must be a number!;"),m.capacity<0&&(a+="capacity must be greater than zero!;")),a}function h(){var a="";return m.cacheFlushInterval&&(b.isNumber(m.cacheFlushInterval)||(a+="cacheFlushInterval must be a number!;"),m.cacheFlushInterval<0&&(a+="cacheFlushInterval must be greater than zero!;")),a}function i(a){var c="";return a&&(b.isNumber(a)||(c+="maxAge must be a number!;"),0>a&&(c+="maxAge must be greater than zero!;")),c}function j(a){a!==p&&(q?q===a&&(q=a.n):q=a,k(a.n,a.p),k(a,p),p=a,p.n=null)}function k(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}var l=0,m=b.extend({},e,{id:d}),n={},o={},p=null,q=null,r="";if(r+=g(m.capacity),r+=i(m.maxAge),r+=h(m.cacheFlushInterval))throw new Error(r);m.capacity||(m.capacity=Number.MAX_VALUE),m.cacheFlushInterval&&(m.cacheFlushIntervalId=setInterval(function(){for(var a in n)n[a].timeoutId&&clearTimeout(n[a].timeoutId);l=0,n={},o={},p=null,q=null},m.cacheFlushInterval)),this.put=function(a,c,d){var e=o[a]||(o[a]={key:a}),f=this,g="";if(!b.isString(a))throw new Error("The key must be a string!");if(d&&d.maxAge&&(g+=i(d.maxAge)))throw new Error(g);return j(e),b.isUndefined(c)?void 0:(a in n||l++,n[a]={value:c},(m.maxAge||d&&d.maxAge)&&(n[a].timestamp=(new Date).getTime(),n[a].timeoutId&&clearTimeout(n[a].timeoutId),n[a].timeoutId=setTimeout(function(){f.remove(a)},d&&d.maxAge||m.maxAge)),l>m.capacity&&this.remove(q.key),c)},this.get=function(a){var b=o[a];if(b)return j(b),n[a].value},this.remove=function(a){var b=o[a];b&&(b===p&&(p=b.p),b===q&&(q=b.n),k(b.n,b.p),delete o[a],delete n[a],l--)},this.removeAll=function(){n={},l=0,o={},p=q=null},this.destroy=function(){clearInterval(m.cacheFlushIntervalId),n=null,m=null,o=null,delete f[d]},this.info=function(){return b.extend({},m,{size:l})},this.keySet=function(){return a(n)},this.keys=function(){return c(n)}}function e(a,c){if(a in f)throw new Error("cacheId "+a+" taken!");if(!b.isString(a))throw new Error("cacheId must be a string!");return f[a]=new d(a,c),f[a]}var f={};return e.info=function(){var a={};return b.forEach(f,function(b,c){a[c]=b.info()}),a},e.get=function(a){return f[a]},e.keySet=function(){return a(f)},e.keys=function(){return c(f)},e}}b.module("angular-cache",[]),b.module("angular-cache").provider("$angularCacheFactory",c)}(window,window.angular);