{"version":3,"file":"angular-cache.js","sources":["../node_modules/cachefactory/dist/cachefactory.es2015.js","../src/index.js"],"sourcesContent":["/**\n * CacheFactory\n * @version 1.5.1 - Homepage <https://github.com/jmdobry/CacheFactory>\n * @copyright (c) 2013-2016 CacheFactory project authors\n * @license MIT <https://github.com/jmdobry/CacheFactory/blob/master/LICENSE>\n * @overview CacheFactory is a very simple and useful cache for the browser.\n */\nvar babelHelpers = {};\nbabelHelpers.typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\nbabelHelpers;\n\n/**\n * @method bubbleUp\n * @param {array} heap The heap.\n * @param {function} weightFunc The weight function.\n * @param {number} n The index of the element to bubble up.\n */\nvar bubbleUp = function bubbleUp(heap, weightFunc, n) {\n  var element = heap[n];\n  var weight = weightFunc(element);\n  // When at 0, an element can not go up any further.\n  while (n > 0) {\n    // Compute the parent element's index, and fetch it.\n    var parentN = Math.floor((n + 1) / 2) - 1;\n    var parent = heap[parentN];\n    // If the parent has a lesser weight, things are in order and we\n    // are done.\n    if (weight >= weightFunc(parent)) {\n      break;\n    } else {\n      heap[parentN] = element;\n      heap[n] = parent;\n      n = parentN;\n    }\n  }\n};\n\n/**\n * @method bubbleDown\n * @param {array} heap The heap.\n * @param {function} weightFunc The weight function.\n * @param {number} n The index of the element to sink down.\n */\nvar bubbleDown = function bubbleDown(heap, weightFunc, n) {\n  var length = heap.length;\n  var node = heap[n];\n  var nodeWeight = weightFunc(node);\n\n  while (true) {\n    var child2N = (n + 1) * 2;\n    var child1N = child2N - 1;\n    var swap = null;\n    if (child1N < length) {\n      var child1 = heap[child1N];\n      var child1Weight = weightFunc(child1);\n      // If the score is less than our node's, we need to swap.\n      if (child1Weight < nodeWeight) {\n        swap = child1N;\n      }\n    }\n    // Do the same checks for the other child.\n    if (child2N < length) {\n      var child2 = heap[child2N];\n      var child2Weight = weightFunc(child2);\n      if (child2Weight < (swap === null ? nodeWeight : weightFunc(heap[child1N]))) {\n        swap = child2N;\n      }\n    }\n\n    if (swap === null) {\n      break;\n    } else {\n      heap[n] = heap[swap];\n      heap[swap] = node;\n      n = swap;\n    }\n  }\n};\n\nfunction BinaryHeap(weightFunc, compareFunc) {\n  if (!weightFunc) {\n    weightFunc = function weightFunc(x) {\n      return x;\n    };\n  }\n  if (!compareFunc) {\n    compareFunc = function compareFunc(x, y) {\n      return x === y;\n    };\n  }\n  if (typeof weightFunc !== 'function') {\n    throw new Error('BinaryHeap([weightFunc][, compareFunc]): \"weightFunc\" must be a function!');\n  }\n  if (typeof compareFunc !== 'function') {\n    throw new Error('BinaryHeap([weightFunc][, compareFunc]): \"compareFunc\" must be a function!');\n  }\n  this.weightFunc = weightFunc;\n  this.compareFunc = compareFunc;\n  this.heap = [];\n}\n\nvar BHProto = BinaryHeap.prototype;\n\nBHProto.push = function (node) {\n  this.heap.push(node);\n  bubbleUp(this.heap, this.weightFunc, this.heap.length - 1);\n};\n\nBHProto.peek = function () {\n  return this.heap[0];\n};\n\nBHProto.pop = function () {\n  var front = this.heap[0];\n  var end = this.heap.pop();\n  if (this.heap.length > 0) {\n    this.heap[0] = end;\n    bubbleDown(this.heap, this.weightFunc, 0);\n  }\n  return front;\n};\n\nBHProto.remove = function (node) {\n  var length = this.heap.length;\n  for (var i = 0; i < length; i++) {\n    if (this.compareFunc(this.heap[i], node)) {\n      var removed = this.heap[i];\n      var end = this.heap.pop();\n      if (i !== length - 1) {\n        this.heap[i] = end;\n        bubbleUp(this.heap, this.weightFunc, i);\n        bubbleDown(this.heap, this.weightFunc, i);\n      }\n      return removed;\n    }\n  }\n  return null;\n};\n\nBHProto.removeAll = function () {\n  this.heap = [];\n};\n\nBHProto.size = function () {\n  return this.heap.length;\n};\n\nvar _Promise = null;\ntry {\n  _Promise = window.Promise;\n} catch (e) {}\n\nvar utils = {\n  isNumber: function isNumber(value) {\n    return typeof value === 'number';\n  },\n  isString: function isString(value) {\n    return typeof value === 'string';\n  },\n  isObject: function isObject(value) {\n    return value !== null && (typeof value === 'undefined' ? 'undefined' : babelHelpers.typeof(value)) === 'object';\n  },\n  isFunction: function isFunction(value) {\n    return typeof value === 'function';\n  },\n  fromJson: function fromJson(value) {\n    return JSON.parse(value);\n  },\n  equals: function equals(a, b) {\n    return a === b;\n  },\n\n\n  Promise: _Promise\n};\n\nfunction _keys(collection) {\n  var keys = [];\n  var key = void 0;\n  if (!utils.isObject(collection)) {\n    return keys;\n  }\n  for (key in collection) {\n    if (collection.hasOwnProperty(key)) {\n      keys.push(key);\n    }\n  }\n  return keys;\n}\n\nfunction _isPromiseLike(value) {\n  return value && typeof value.then === 'function';\n}\n\nfunction _stringifyNumber(number) {\n  if (utils.isNumber(number)) {\n    return number.toString();\n  }\n  return number;\n}\n\nfunction _keySet(collection) {\n  var keySet = {};\n  var key = void 0;\n  if (!utils.isObject(collection)) {\n    return keySet;\n  }\n  for (key in collection) {\n    if (collection.hasOwnProperty(key)) {\n      keySet[key] = key;\n    }\n  }\n  return keySet;\n}\n\nvar defaults = {\n  capacity: Number.MAX_VALUE,\n  maxAge: Number.MAX_VALUE,\n  deleteOnExpire: 'none',\n  onExpire: null,\n  cacheFlushInterval: null,\n  recycleFreq: 1000,\n  storageMode: 'memory',\n  storageImpl: null,\n  disabled: false,\n  storagePrefix: 'cachefactory.caches.',\n  storeOnResolve: false,\n  storeOnReject: false\n};\n\nvar caches = {};\n\nfunction createCache(cacheId, options) {\n  if (cacheId in caches) {\n    throw new Error(cacheId + ' already exists!');\n  } else if (!utils.isString(cacheId)) {\n    throw new Error('cacheId must be a string!');\n  }\n\n  var $$data = {};\n  var $$promises = {};\n  var $$storage = null;\n  var $$expiresHeap = new BinaryHeap(function (x) {\n    return x.expires;\n  }, utils.equals);\n  var $$lruHeap = new BinaryHeap(function (x) {\n    return x.accessed;\n  }, utils.equals);\n\n  var cache = caches[cacheId] = {\n\n    $$id: cacheId,\n\n    destroy: function destroy() {\n      clearInterval(this.$$cacheFlushIntervalId);\n      clearInterval(this.$$recycleFreqId);\n      this.removeAll();\n      if ($$storage) {\n        $$storage().removeItem(this.$$prefix + '.keys');\n        $$storage().removeItem(this.$$prefix);\n      }\n      $$storage = null;\n      $$data = null;\n      $$lruHeap = null;\n      $$expiresHeap = null;\n      this.$$prefix = null;\n      delete caches[this.$$id];\n    },\n    disable: function disable() {\n      this.$$disabled = true;\n    },\n    enable: function enable() {\n      delete this.$$disabled;\n    },\n    get: function get(key, options) {\n      var _this2 = this;\n\n      if (Array.isArray(key)) {\n        var _ret = function () {\n          var keys = key;\n          var values = [];\n\n          keys.forEach(function (key) {\n            var value = _this2.get(key, options);\n            if (value !== null && value !== undefined) {\n              values.push(value);\n            }\n          });\n\n          return {\n            v: values\n          };\n        }();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret)) === \"object\") return _ret.v;\n      } else {\n        key = _stringifyNumber(key);\n\n        if (this.$$disabled) {\n          return;\n        }\n      }\n\n      options = options || {};\n      if (!utils.isString(key)) {\n        throw new Error('key must be a string!');\n      } else if (options && !utils.isObject(options)) {\n        throw new Error('options must be an object!');\n      } else if (options.onExpire && !utils.isFunction(options.onExpire)) {\n        throw new Error('options.onExpire must be a function!');\n      }\n\n      var item = void 0;\n\n      if ($$storage) {\n        if ($$promises[key]) {\n          return $$promises[key];\n        }\n\n        var itemJson = $$storage().getItem(this.$$prefix + '.data.' + key);\n\n        if (itemJson) {\n          item = utils.fromJson(itemJson);\n        } else {\n          return;\n        }\n      } else if (utils.isObject($$data)) {\n        if (!(key in $$data)) {\n          return;\n        }\n\n        item = $$data[key];\n      }\n\n      var value = item.value;\n      var now = new Date().getTime();\n\n      if ($$storage) {\n        $$lruHeap.remove({\n          key: key,\n          accessed: item.accessed\n        });\n        item.accessed = now;\n        $$lruHeap.push({\n          key: key,\n          accessed: now\n        });\n      } else {\n        $$lruHeap.remove(item);\n        item.accessed = now;\n        $$lruHeap.push(item);\n      }\n\n      if (this.$$deleteOnExpire === 'passive' && 'expires' in item && item.expires < now) {\n        this.remove(key);\n\n        if (this.$$onExpire) {\n          this.$$onExpire(key, item.value, options.onExpire);\n        } else if (options.onExpire) {\n          options.onExpire.call(this, key, item.value);\n        }\n        value = undefined;\n      } else if ($$storage) {\n        $$storage().setItem(this.$$prefix + '.data.' + key, JSON.stringify(item));\n      }\n\n      return value;\n    },\n    info: function info(key) {\n      if (key) {\n        var item = void 0;\n        if ($$storage) {\n          var itemJson = $$storage().getItem(this.$$prefix + '.data.' + key);\n\n          if (itemJson) {\n            item = utils.fromJson(itemJson);\n            return {\n              created: item.created,\n              accessed: item.accessed,\n              expires: item.expires,\n              isExpired: new Date().getTime() - item.created > (item.maxAge || this.$$maxAge)\n            };\n          } else {\n            return undefined;\n          }\n        } else if (utils.isObject($$data) && key in $$data) {\n          item = $$data[key];\n\n          return {\n            created: item.created,\n            accessed: item.accessed,\n            expires: item.expires,\n            isExpired: new Date().getTime() - item.created > (item.maxAge || this.$$maxAge)\n          };\n        } else {\n          return undefined;\n        }\n      } else {\n        return {\n          id: this.$$id,\n          capacity: this.$$capacity,\n          maxAge: this.$$maxAge,\n          deleteOnExpire: this.$$deleteOnExpire,\n          onExpire: this.$$onExpire,\n          cacheFlushInterval: this.$$cacheFlushInterval,\n          recycleFreq: this.$$recycleFreq,\n          storageMode: this.$$storageMode,\n          storageImpl: $$storage ? $$storage() : undefined,\n          disabled: !!this.$$disabled,\n          size: $$lruHeap && $$lruHeap.size() || 0\n        };\n      }\n    },\n    keys: function keys() {\n      if ($$storage) {\n        var keysJson = $$storage().getItem(this.$$prefix + '.keys');\n\n        if (keysJson) {\n          return utils.fromJson(keysJson);\n        } else {\n          return [];\n        }\n      } else {\n        return _keys($$data);\n      }\n    },\n    keySet: function keySet() {\n      if ($$storage) {\n        var keysJson = $$storage().getItem(this.$$prefix + '.keys');\n        var kSet = {};\n\n        if (keysJson) {\n          var keys = utils.fromJson(keysJson);\n\n          for (var i = 0; i < keys.length; i++) {\n            kSet[keys[i]] = keys[i];\n          }\n        }\n        return kSet;\n      } else {\n        return _keySet($$data);\n      }\n    },\n    put: function put(key, value, options) {\n      var _this3 = this;\n\n      options || (options = {});\n\n      var storeOnResolve = 'storeOnResolve' in options ? !!options.storeOnResolve : this.$$storeOnResolve;\n      var storeOnReject = 'storeOnReject' in options ? !!options.storeOnReject : this.$$storeOnReject;\n\n      var getHandler = function getHandler(store, isError) {\n        return function (v) {\n          if (store) {\n            delete $$promises[key];\n            if (utils.isObject(v) && 'status' in v && 'data' in v) {\n              v = [v.status, v.data, v.headers(), v.statusText];\n              _this3.put(key, v);\n            } else {\n              _this3.put(key, v);\n            }\n          }\n          if (isError) {\n            if (utils.Promise) {\n              return utils.Promise.reject(v);\n            } else {\n              throw v;\n            }\n          } else {\n            return v;\n          }\n        };\n      };\n\n      if (this.$$disabled || !utils.isObject($$data) || value === null || value === undefined) {\n        return;\n      }\n      key = _stringifyNumber(key);\n\n      if (!utils.isString(key)) {\n        throw new Error('key must be a string!');\n      }\n\n      var now = new Date().getTime();\n      var item = {\n        key: key,\n        value: _isPromiseLike(value) ? value.then(getHandler(storeOnResolve, false), getHandler(storeOnReject, true)) : value,\n        created: options.created === undefined ? now : options.created,\n        accessed: options.accessed === undefined ? now : options.accessed\n      };\n      if (options.maxAge) {\n        item.maxAge = options.maxAge;\n      }\n\n      if (options.expires === undefined) {\n        item.expires = item.created + (item.maxAge || this.$$maxAge);\n      } else {\n        item.expires = options.expires;\n      }\n\n      if ($$storage) {\n        if (_isPromiseLike(item.value)) {\n          $$promises[key] = item.value;\n          return $$promises[key];\n        }\n        var keysJson = $$storage().getItem(this.$$prefix + '.keys');\n        var keys = keysJson ? utils.fromJson(keysJson) : [];\n        var itemJson = $$storage().getItem(this.$$prefix + '.data.' + key);\n\n        // Remove existing\n        if (itemJson) {\n          this.remove(key);\n        }\n        // Add to expires heap\n        $$expiresHeap.push({\n          key: key,\n          expires: item.expires\n        });\n        // Add to lru heap\n        $$lruHeap.push({\n          key: key,\n          accessed: item.accessed\n        });\n        // Set item\n        $$storage().setItem(this.$$prefix + '.data.' + key, JSON.stringify(item));\n        var exists = false;\n        for (var i = 0; i < keys.length; i++) {\n          if (keys[i] === key) {\n            exists = true;\n            break;\n          }\n        }\n        if (!exists) {\n          keys.push(key);\n        }\n        $$storage().setItem(this.$$prefix + '.keys', JSON.stringify(keys));\n      } else {\n        // Remove existing\n        if ($$data[key]) {\n          this.remove(key);\n        }\n        // Add to expires heap\n        $$expiresHeap.push(item);\n        // Add to lru heap\n        $$lruHeap.push(item);\n        // Set item\n        $$data[key] = item;\n        delete $$promises[key];\n      }\n\n      // Handle exceeded capacity\n      if ($$lruHeap.size() > this.$$capacity) {\n        this.remove($$lruHeap.peek().key);\n      }\n\n      return value;\n    },\n    remove: function remove(key) {\n      key += '';\n      delete $$promises[key];\n      if ($$storage) {\n        var itemJson = $$storage().getItem(this.$$prefix + '.data.' + key);\n\n        if (itemJson) {\n          var item = utils.fromJson(itemJson);\n          $$lruHeap.remove({\n            key: key,\n            accessed: item.accessed\n          });\n          $$expiresHeap.remove({\n            key: key,\n            expires: item.expires\n          });\n          $$storage().removeItem(this.$$prefix + '.data.' + key);\n          var keysJson = $$storage().getItem(this.$$prefix + '.keys');\n          var keys = keysJson ? utils.fromJson(keysJson) : [];\n          var index = keys.indexOf(key);\n\n          if (index >= 0) {\n            keys.splice(index, 1);\n          }\n          $$storage().setItem(this.$$prefix + '.keys', JSON.stringify(keys));\n          return item.value;\n        }\n      } else if (utils.isObject($$data)) {\n        var value = $$data[key] ? $$data[key].value : undefined;\n        $$lruHeap.remove($$data[key]);\n        $$expiresHeap.remove($$data[key]);\n        $$data[key] = null;\n        delete $$data[key];\n        return value;\n      }\n    },\n    removeAll: function removeAll() {\n      if ($$storage) {\n        $$lruHeap.removeAll();\n        $$expiresHeap.removeAll();\n        var keysJson = $$storage().getItem(this.$$prefix + '.keys');\n\n        if (keysJson) {\n          var keys = utils.fromJson(keysJson);\n\n          for (var i = 0; i < keys.length; i++) {\n            this.remove(keys[i]);\n          }\n        }\n        $$storage().setItem(this.$$prefix + '.keys', JSON.stringify([]));\n      } else if (utils.isObject($$data)) {\n        $$lruHeap.removeAll();\n        $$expiresHeap.removeAll();\n        for (var key in $$data) {\n          $$data[key] = null;\n        }\n        $$data = {};\n      } else {\n        $$lruHeap.removeAll();\n        $$expiresHeap.removeAll();\n        $$data = {};\n      }\n      $$promises = {};\n    },\n    removeExpired: function removeExpired() {\n      var now = new Date().getTime();\n      var expired = {};\n      var key = void 0;\n      var expiredItem = void 0;\n\n      while ((expiredItem = $$expiresHeap.peek()) && expiredItem.expires <= now) {\n        expired[expiredItem.key] = expiredItem.value ? expiredItem.value : null;\n        $$expiresHeap.pop();\n      }\n\n      if ($$storage) {\n        for (key in expired) {\n          var itemJson = $$storage().getItem(this.$$prefix + '.data.' + key);\n          if (itemJson) {\n            expired[key] = utils.fromJson(itemJson).value;\n            this.remove(key);\n          }\n        }\n      } else {\n        for (key in expired) {\n          this.remove(key);\n        }\n      }\n\n      if (this.$$onExpire) {\n        for (key in expired) {\n          this.$$onExpire(key, expired[key]);\n        }\n      }\n\n      return expired;\n    },\n    setCacheFlushInterval: function setCacheFlushInterval(cacheFlushInterval) {\n      var _this = this;\n      if (cacheFlushInterval === null) {\n        delete _this.$$cacheFlushInterval;\n      } else if (!utils.isNumber(cacheFlushInterval)) {\n        throw new Error('cacheFlushInterval must be a number!');\n      } else if (cacheFlushInterval < 0) {\n        throw new Error('cacheFlushInterval must be greater than zero!');\n      } else if (cacheFlushInterval !== _this.$$cacheFlushInterval) {\n        _this.$$cacheFlushInterval = cacheFlushInterval;\n\n        clearInterval(_this.$$cacheFlushIntervalId); // eslint-disable-line\n\n        _this.$$cacheFlushIntervalId = setInterval(function () {\n          _this.removeAll();\n        }, _this.$$cacheFlushInterval);\n      }\n    },\n    setCapacity: function setCapacity(capacity) {\n      if (capacity === null) {\n        delete this.$$capacity;\n      } else if (!utils.isNumber(capacity)) {\n        throw new Error('capacity must be a number!');\n      } else if (capacity < 0) {\n        throw new Error('capacity must be greater than zero!');\n      } else {\n        this.$$capacity = capacity;\n      }\n      var removed = {};\n      while ($$lruHeap.size() > this.$$capacity) {\n        removed[$$lruHeap.peek().key] = this.remove($$lruHeap.peek().key);\n      }\n      return removed;\n    },\n    setDeleteOnExpire: function setDeleteOnExpire(deleteOnExpire, setRecycleFreq) {\n      if (deleteOnExpire === null) {\n        delete this.$$deleteOnExpire;\n      } else if (!utils.isString(deleteOnExpire)) {\n        throw new Error('deleteOnExpire must be a string!');\n      } else if (deleteOnExpire !== 'none' && deleteOnExpire !== 'passive' && deleteOnExpire !== 'aggressive') {\n        throw new Error('deleteOnExpire must be \"none\", \"passive\" or \"aggressive\"!');\n      } else {\n        this.$$deleteOnExpire = deleteOnExpire;\n      }\n      if (setRecycleFreq !== false) {\n        this.setRecycleFreq(this.$$recycleFreq);\n      }\n    },\n    setMaxAge: function setMaxAge(maxAge) {\n      if (maxAge === null) {\n        this.$$maxAge = Number.MAX_VALUE;\n      } else if (!utils.isNumber(maxAge)) {\n        throw new Error('maxAge must be a number!');\n      } else if (maxAge < 0) {\n        throw new Error('maxAge must be greater than zero!');\n      } else {\n        this.$$maxAge = maxAge;\n      }\n      var i = void 0,\n          keys = void 0,\n          key = void 0;\n\n      $$expiresHeap.removeAll();\n\n      if ($$storage) {\n        var keysJson = $$storage().getItem(this.$$prefix + '.keys');\n\n        keys = keysJson ? utils.fromJson(keysJson) : [];\n\n        for (i = 0; i < keys.length; i++) {\n          key = keys[i];\n          var itemJson = $$storage().getItem(this.$$prefix + '.data.' + key);\n\n          if (itemJson) {\n            var item = utils.fromJson(itemJson);\n            if (this.$$maxAge === Number.MAX_VALUE) {\n              item.expires = Number.MAX_VALUE;\n            } else {\n              item.expires = item.created + (item.maxAge || this.$$maxAge);\n            }\n            $$expiresHeap.push({\n              key: key,\n              expires: item.expires\n            });\n          }\n        }\n      } else {\n        keys = _keys($$data);\n\n        for (i = 0; i < keys.length; i++) {\n          key = keys[i];\n          if (this.$$maxAge === Number.MAX_VALUE) {\n            $$data[key].expires = Number.MAX_VALUE;\n          } else {\n            $$data[key].expires = $$data[key].created + ($$data[key].maxAge || this.$$maxAge);\n          }\n          $$expiresHeap.push($$data[key]);\n        }\n      }\n      if (this.$$deleteOnExpire === 'aggressive') {\n        return this.removeExpired();\n      } else {\n        return {};\n      }\n    },\n    setOnExpire: function setOnExpire(onExpire) {\n      if (onExpire === null) {\n        delete this.$$onExpire;\n      } else if (!utils.isFunction(onExpire)) {\n        throw new Error('onExpire must be a function!');\n      } else {\n        this.$$onExpire = onExpire;\n      }\n    },\n    setOptions: function setOptions(cacheOptions, strict) {\n      cacheOptions = cacheOptions || {};\n      strict = !!strict;\n      if (!utils.isObject(cacheOptions)) {\n        throw new Error('cacheOptions must be an object!');\n      }\n\n      if ('storagePrefix' in cacheOptions) {\n        this.$$storagePrefix = cacheOptions.storagePrefix;\n      } else if (strict) {\n        this.$$storagePrefix = defaults.storagePrefix;\n      }\n\n      this.$$prefix = this.$$storagePrefix + this.$$id;\n\n      if ('disabled' in cacheOptions) {\n        this.$$disabled = !!cacheOptions.disabled;\n      } else if (strict) {\n        this.$$disabled = defaults.disabled;\n      }\n\n      if ('deleteOnExpire' in cacheOptions) {\n        this.setDeleteOnExpire(cacheOptions.deleteOnExpire, false);\n      } else if (strict) {\n        this.setDeleteOnExpire(defaults.deleteOnExpire, false);\n      }\n\n      if ('recycleFreq' in cacheOptions) {\n        this.setRecycleFreq(cacheOptions.recycleFreq);\n      } else if (strict) {\n        this.setRecycleFreq(defaults.recycleFreq);\n      }\n\n      if ('maxAge' in cacheOptions) {\n        this.setMaxAge(cacheOptions.maxAge);\n      } else if (strict) {\n        this.setMaxAge(defaults.maxAge);\n      }\n\n      if ('storeOnResolve' in cacheOptions) {\n        this.$$storeOnResolve = !!cacheOptions.storeOnResolve;\n      } else if (strict) {\n        this.$$storeOnResolve = defaults.storeOnResolve;\n      }\n\n      if ('storeOnReject' in cacheOptions) {\n        this.$$storeOnReject = !!cacheOptions.storeOnReject;\n      } else if (strict) {\n        this.$$storeOnReject = defaults.storeOnReject;\n      }\n\n      if ('capacity' in cacheOptions) {\n        this.setCapacity(cacheOptions.capacity);\n      } else if (strict) {\n        this.setCapacity(defaults.capacity);\n      }\n\n      if ('cacheFlushInterval' in cacheOptions) {\n        this.setCacheFlushInterval(cacheOptions.cacheFlushInterval);\n      } else if (strict) {\n        this.setCacheFlushInterval(defaults.cacheFlushInterval);\n      }\n\n      if ('onExpire' in cacheOptions) {\n        this.setOnExpire(cacheOptions.onExpire);\n      } else if (strict) {\n        this.setOnExpire(defaults.onExpire);\n      }\n\n      if ('storageMode' in cacheOptions || 'storageImpl' in cacheOptions) {\n        this.setStorageMode(cacheOptions.storageMode || defaults.storageMode, cacheOptions.storageImpl || defaults.storageImpl);\n      } else if (strict) {\n        this.setStorageMode(defaults.storageMode, defaults.storageImpl);\n      }\n    },\n    setRecycleFreq: function setRecycleFreq(recycleFreq) {\n      if (recycleFreq === null) {\n        delete this.$$recycleFreq;\n      } else if (!utils.isNumber(recycleFreq)) {\n        throw new Error('recycleFreq must be a number!');\n      } else if (recycleFreq < 0) {\n        throw new Error('recycleFreq must be greater than zero!');\n      } else {\n        this.$$recycleFreq = recycleFreq;\n      }\n      clearInterval(this.$$recycleFreqId);\n      if (this.$$deleteOnExpire === 'aggressive') {\n        (function (self) {\n          self.$$recycleFreqId = setInterval(function () {\n            self.removeExpired();\n          }, self.$$recycleFreq);\n        })(this);\n      } else {\n        delete this.$$recycleFreqId;\n      }\n    },\n    setStorageMode: function setStorageMode(storageMode, storageImpl) {\n      if (!utils.isString(storageMode)) {\n        throw new Error('storageMode must be a string!');\n      } else if (storageMode !== 'memory' && storageMode !== 'localStorage' && storageMode !== 'sessionStorage') {\n        throw new Error('storageMode must be \"memory\", \"localStorage\" or \"sessionStorage\"!');\n      }\n\n      var prevStorage = $$storage;\n      var prevData = $$data;\n      var shouldReInsert = false;\n      var items = {};\n\n      function load(prevStorage, prevData) {\n        var keys = this.keys();\n        var length = keys.length;\n        if (length) {\n          var _key = void 0;\n          var prevDataIsObject = utils.isObject(prevData);\n          for (var i = 0; i < length; i++) {\n            _key = keys[i];\n            if (prevStorage) {\n              var itemJson = prevStorage().getItem(this.$$prefix + '.data.' + _key);\n              if (itemJson) {\n                items[_key] = utils.fromJson(itemJson);\n              }\n            } else if (prevDataIsObject) {\n              items[_key] = prevData[_key];\n            }\n            this.remove(_key);\n          }\n          shouldReInsert = true;\n        }\n      }\n\n      if (!this.$$initializing) {\n        load.call(this, prevStorage, prevData);\n      }\n\n      this.$$storageMode = storageMode;\n\n      if (storageImpl) {\n        if (!utils.isObject(storageImpl)) {\n          throw new Error('storageImpl must be an object!');\n        } else if (!('setItem' in storageImpl) || typeof storageImpl.setItem !== 'function') {\n          throw new Error('storageImpl must implement \"setItem(key, value)\"!');\n        } else if (!('getItem' in storageImpl) || typeof storageImpl.getItem !== 'function') {\n          throw new Error('storageImpl must implement \"getItem(key)\"!');\n        } else if (!('removeItem' in storageImpl) || typeof storageImpl.removeItem !== 'function') {\n          throw new Error('storageImpl must implement \"removeItem(key)\"!');\n        }\n        $$storage = function $$storage() {\n          return storageImpl;\n        };\n      } else if (this.$$storageMode === 'localStorage') {\n        try {\n          localStorage.setItem('cachefactory', 'cachefactory');\n          localStorage.removeItem('cachefactory');\n          $$storage = function $$storage() {\n            return localStorage;\n          };\n        } catch (e) {\n          $$storage = null;\n          this.$$storageMode = 'memory';\n        }\n      } else if (this.$$storageMode === 'sessionStorage') {\n        try {\n          sessionStorage.setItem('cachefactory', 'cachefactory');\n          sessionStorage.removeItem('cachefactory');\n          $$storage = function $$storage() {\n            return sessionStorage;\n          };\n        } catch (e) {\n          $$storage = null;\n          this.$$storageMode = 'memory';\n        }\n      } else {\n        $$storage = null;\n        this.$$storageMode = 'memory';\n      }\n\n      if (this.$$initializing) {\n        load.call(this, $$storage, $$data);\n      }\n\n      if (shouldReInsert) {\n        var item = void 0;\n        for (var key in items) {\n          item = items[key];\n          this.put(key, item.value, {\n            created: item.created,\n            accessed: item.accessed,\n            expires: item.expires\n          });\n        }\n      }\n    },\n    touch: function touch(key, options) {\n      var _this4 = this;\n\n      if (key) {\n        var val = this.get(key, {\n          onExpire: function onExpire(k, v) {\n            return _this4.put(k, v);\n          }\n        });\n        if (val) {\n          this.put(key, val, options);\n        }\n      } else {\n        var keys = this.keys();\n        for (var i = 0; i < keys.length; i++) {\n          this.touch(keys[i], options);\n        }\n      }\n    },\n    values: function values() {\n      var keys = this.keys();\n      var items = [];\n      for (var i = 0; i < keys.length; i++) {\n        items.push(this.get(keys[i]));\n      }\n      return items;\n    }\n  };\n\n  cache.$$initializing = true;\n  cache.setOptions(options, true);\n  cache.$$initializing = false;\n\n  return cache;\n}\n\nfunction CacheFactory(cacheId, options) {\n  return createCache(cacheId, options);\n}\n\nCacheFactory.createCache = createCache;\nCacheFactory.defaults = defaults;\n\nCacheFactory.info = function () {\n  var keys = _keys(caches);\n  var info = {\n    size: keys.length,\n    caches: {}\n  };\n  for (var opt in defaults) {\n    if (defaults.hasOwnProperty(opt)) {\n      info[opt] = defaults[opt];\n    }\n  }\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    info.caches[key] = caches[key].info();\n  }\n  return info;\n};\n\nCacheFactory.get = function (cacheId) {\n  return caches[cacheId];\n};\nCacheFactory.keySet = function () {\n  return _keySet(caches);\n};\nCacheFactory.keys = function () {\n  return _keys(caches);\n};\nCacheFactory.destroy = function (cacheId) {\n  if (caches[cacheId]) {\n    caches[cacheId].destroy();\n    delete caches[cacheId];\n  }\n};\nCacheFactory.destroyAll = function () {\n  for (var cacheId in caches) {\n    caches[cacheId].destroy();\n  }\n  caches = {};\n};\nCacheFactory.clearAll = function () {\n  for (var cacheId in caches) {\n    caches[cacheId].removeAll();\n  }\n};\nCacheFactory.removeExpiredFromAll = function () {\n  var expired = {};\n  for (var cacheId in caches) {\n    expired[cacheId] = caches[cacheId].removeExpired();\n  }\n  return expired;\n};\nCacheFactory.enableAll = function () {\n  for (var cacheId in caches) {\n    caches[cacheId].$$disabled = false;\n  }\n};\nCacheFactory.disableAll = function () {\n  for (var cacheId in caches) {\n    caches[cacheId].$$disabled = true;\n  }\n};\nCacheFactory.touchAll = function () {\n  for (var cacheId in caches) {\n    caches[cacheId].touch();\n  }\n};\n\nCacheFactory.utils = utils;\nCacheFactory.BinaryHeap = BinaryHeap;\n\nexport default CacheFactory;\n//# sourceMappingURL=cachefactory.es2015.js.map","import angular from 'angular'\nimport CacheFactory from '../node_modules/cachefactory/dist/cachefactory.es2015'\n\nCacheFactory.utils.equals = angular.equals\nCacheFactory.utils.isObject = angular.isObject\nCacheFactory.utils.fromJson = angular.fromJson\n\nfunction BinaryHeapProvider () {\n  this.$get = function () { return CacheFactory.BinaryHeap }\n}\n\nfunction CacheFactoryProvider () {\n  this.defaults = CacheFactory.defaults\n  this.defaults.storagePrefix = 'angular-cache.caches.'\n\n  this.$get = ['$q', function ($q) {\n    CacheFactory.utils.Promise = $q\n    return CacheFactory\n  }]\n}\n\nangular.module('angular-cache', [])\n  .provider('BinaryHeap', BinaryHeapProvider)\n  .provider('CacheFactory', CacheFactoryProvider)\n  .run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$destroy', function () {\n      CacheFactory.destroyAll()\n    })\n  }])\n\nexport default 'angular-cache'\n"],"names":["babelHelpers","typeof","Symbol","iterator","obj","constructor","bubbleUp","heap","weightFunc","n","element","weight","parentN","Math","floor","parent","bubbleDown","length","node","nodeWeight","child2N","child1N","swap","child1","child1Weight","child2","child2Weight","BinaryHeap","compareFunc","x","y","Error","BHProto","prototype","push","peek","pop","front","end","remove","i","removed","removeAll","size","_Promise","window","Promise","e","utils","isNumber","value","isString","isObject","isFunction","fromJson","JSON","parse","equals","a","b","_keys","collection","keys","key","hasOwnProperty","_isPromiseLike","then","_stringifyNumber","number","toString","_keySet","keySet","defaults","capacity","Number","MAX_VALUE","maxAge","deleteOnExpire","onExpire","cacheFlushInterval","recycleFreq","storageMode","storageImpl","disabled","storagePrefix","storeOnResolve","storeOnReject","caches","createCache","cacheId","options","$$data","$$promises","$$storage","$$expiresHeap","expires","$$lruHeap","accessed","cache","$$id","destroy","clearInterval","$$cacheFlushIntervalId","$$recycleFreqId","removeItem","$$prefix","disable","$$disabled","enable","get","_this2","Array","isArray","_ret","values","forEach","undefined","v","item","itemJson","getItem","now","Date","getTime","$$deleteOnExpire","$$onExpire","call","setItem","stringify","info","created","isExpired","$$maxAge","id","$$capacity","$$cacheFlushInterval","$$recycleFreq","$$storageMode","keysJson","kSet","put","_this3","$$storeOnResolve","$$storeOnReject","getHandler","store","isError","status","data","headers","statusText","reject","exists","index","indexOf","splice","removeExpired","expired","expiredItem","setCacheFlushInterval","_this","setInterval","setCapacity","setDeleteOnExpire","setRecycleFreq","setMaxAge","setOnExpire","setOptions","cacheOptions","strict","$$storagePrefix","setStorageMode","self","prevStorage","prevData","shouldReInsert","items","load","_key","prevDataIsObject","$$initializing","localStorage","sessionStorage","touch","_this4","val","k","CacheFactory","opt","destroyAll","clearAll","removeExpiredFromAll","enableAll","disableAll","touchAll","angular","BinaryHeapProvider","$get","CacheFactoryProvider","$q","module","provider","run","$rootScope","$on"],"mappings":"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"}