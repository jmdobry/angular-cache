{"version":3,"file":"angular-cache.js","sources":["../node_modules/cachefactory/dist/cachefactory.es2015.js","../src/index.js"],"sourcesContent":["/**\n * CacheFactory\n * @version 3.0.0 - Homepage <https://github.com/jmdobry/CacheFactory>\n * @copyright (c) 2015-2017 CacheFactory project authors\n * @license MIT <https://github.com/jmdobry/CacheFactory/blob/master/LICENSE>\n * @overview CacheFactory is a very simple and useful cache for the browser.\n */\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/**\n * @private\n * @param {array} heap The heap.\n * @param {function} weightFunc The weight function.\n * @param {number} n The index of the element to bubble up.\n */var bubbleUp=function bubbleUp(heap,weightFunc,n){var element=heap[n];var weight=weightFunc(element);// When at 0, an element can not go up any further.\nwhile(n>0){// Compute the parent element's index, and fetch it.\nvar parentN=Math.floor((n+1)/2)-1;var parent=heap[parentN];// If the parent has a lesser weight, things are in order and we\n// are done.\nif(weight>=weightFunc(parent)){break;}else{heap[parentN]=element;heap[n]=parent;n=parentN;}}};/**\n * @private\n * @param {array} heap The heap.\n * @param {function} weightFunc The weight function.\n * @param {number} n The index of the element to sink down.\n */var bubbleDown=function bubbleDown(heap,weightFunc,n){var length=heap.length;var node=heap[n];var nodeWeight=weightFunc(node);while(true){var child2N=(n+1)*2;var child1N=child2N-1;var swap=null;if(child1N<length){var child1=heap[child1N];var child1Weight=weightFunc(child1);// If the score is less than our node's, we need to swap.\nif(child1Weight<nodeWeight){swap=child1N;}}// Do the same checks for the other child.\nif(child2N<length){var child2=heap[child2N];var child2Weight=weightFunc(child2);if(child2Weight<(swap===null?nodeWeight:weightFunc(heap[child1N]))){swap=child2N;}}if(swap===null){break;}else{heap[n]=heap[swap];heap[swap]=node;n=swap;}}};/**\n * @class BinaryHeap\n * @example\n * import { BinaryHeap } from 'cachefactory';\n *\n * const queue = new BinaryHeap();\n * queue.push(2);\n * queue.push(77);\n * queue.push(8);\n * queue.push(33);\n * queue.push(5);\n * queue.pop(); // 2\n * queue.pop(); // 5\n * queue.pop(); // 8\n * queue.pop(); // 33\n * queue.pop(); // 77\n *\n * const userQueue = new BinaryHeap(\n *   (user) => user.age,\n *   (userOne, userTwo) => userOne.id === userTwo.id\n * );\n * queue.push({ id: 1, age: 34 });\n * queue.push({ id: 2, age: 29 });\n * queue.push({ id: 3, age: 25 });\n * queue.push({ id: 3, age: 28 });\n * queue.push({ id: 3, age: 27 });\n * queue.push({ id: 4, age: 42 });\n * queue.push({ id: 5, age: 19 });\n * queue.pop(); // { id: 5, age: 19 }\n * queue.pop(); // { id: 3, age: 27 }\n * queue.pop(); // { id: 2, age: 29 }\n * queue.pop(); // { id: 1, age: 34 }\n * queue.pop(); // { id: 4, age: 42 }\n *\n * @param {function} [weightFunc] See {@link BinaryHeap#weightFunc}.\n * @param {function} [compareFunc] See {@link BinaryHeap#compareFunc}.\n */var BinaryHeap=function(){function BinaryHeap(weightFunc,compareFunc){classCallCheck(this,BinaryHeap);if(!weightFunc){weightFunc=function weightFunc(x){return x;};}if(!compareFunc){compareFunc=function compareFunc(x,y){return x===y;};}if(typeof weightFunc!=='function'){throw new Error('BinaryHeap([weightFunc][, compareFunc]): \"weightFunc\" must be a function!');}if(typeof compareFunc!=='function'){throw new Error('BinaryHeap([weightFunc][, compareFunc]): \"compareFunc\" must be a function!');}/**\n     * The heap's configured weight function.\n     *\n     * Default:\n     * ```js\n     * function (x) {\n     *   return x;\n     * }\n     * ```\n     *\n     * @name BinaryHeap#weightFunc\n     * @type {function}\n     */this.weightFunc=weightFunc;/**\n     * The heap's configured compare function.\n     *\n     * Default:\n     * ```js\n     * function (x, y) {\n     *   return x === y;\n     * }\n     * ```\n     *\n     * @name BinaryHeap#compareFunc\n     * @type {function}\n     */this.compareFunc=compareFunc;/**\n     * The heap's data.\n     *\n     * @name BinaryHeap#heap\n     * @type {Array<*>}\n     */this.heap=[];}/**\n   * Push an item into the queue.\n   *\n   * @method BinaryHeap#push\n   * @param {*} node\n   */createClass(BinaryHeap,[{key:'push',value:function push(node){this.heap.push(node);bubbleUp(this.heap,this.weightFunc,this.heap.length-1);}/**\n   * Look at the item at the front of the queue.\n   *\n   * @method BinaryHeap#peek\n   * @returns {*}\n   */},{key:'peek',value:function peek(){return this.heap[0];}/**\n   * Pop an item off the front of the queue.\n   *\n   * @method BinaryHeap#pop\n   * @returns {*}\n   */},{key:'pop',value:function pop(){var front=this.heap[0];var end=this.heap.pop();if(this.heap.length>0){this.heap[0]=end;bubbleDown(this.heap,this.weightFunc,0);}return front;}/**\n   * Remove the given item from the queue.\n   *\n   * @method BinaryHeap#remove\n   * @param {*} node\n   */},{key:'remove',value:function remove(node){var length=this.heap.length;for(var i=0;i<length;i++){if(this.compareFunc(this.heap[i],node)){var removed=this.heap[i];var end=this.heap.pop();if(i!==length-1){this.heap[i]=end;bubbleUp(this.heap,this.weightFunc,i);bubbleDown(this.heap,this.weightFunc,i);}return removed;}}return null;}/**\n   * Clear the heap.\n   *\n   * @method BinaryHeap#removeAll\n   */},{key:'removeAll',value:function removeAll(){this.heap=[];}/**\n   * Return the length of the queue.\n   *\n   * @method BinaryHeap#size\n   * @returns {number}\n   */},{key:'size',value:function size(){return this.heap.length;}}]);return BinaryHeap;}();\n\nvar defaults$1 = {capacity:Number.MAX_VALUE,cacheFlushInterval:null,deleteOnExpire:'none',enabled:true,onExpire:null,maxAge:Number.MAX_VALUE,recycleFreq:1000,storageMode:'memory',storageImpl:null,storagePrefix:'cachefactory.caches.',storeOnReject:false,storeOnResolve:false};\n\nvar _Promise=null;try{_Promise=window.Promise;}catch(e){}/**\n * Utility methods used by CacheFactory.\n *\n * @example\n * import { utils } from 'cachefactory'\n * console.log(utils.isString('foo')) // true\n *\n * @namespace utils\n * @type {object}\n */var utils={/**\n   * Returns whether the two values are strictly equal.\n   *\n   * @example\n   * import { utils } from 'cachefactory'\n   *\n   * console.log(utils.equals(4, 4) // true\n   * console.log(utils.equals(4, '4') // false\n   *\n   * @method utils.equals\n   * @param {*} a The first value.\n   * @param {*} a The second value.\n   * @returns {booleal} Whether the two values are strictly equal.\n   */equals:function equals(a,b){return a===b;},/**\n   * Proxy for `JSON.parse`.\n   *\n   * @example\n   * import { utils } from 'cachefactory'\n   *\n   * const a = utils.fromJson('{\"name\":\"John\"}')\n   * console.log(a) // { name: 'John' }\n   *\n   * @method utils.fromJson\n   * @param {string} json JSON to parse.\n   * @returns {object} The parsed object.\n   * @see utils.toJson\n   */fromJson:function fromJson(value){return JSON.parse(value);},/**\n   * Returns whether the provided value is a function.\n   *\n   * @example\n   * import { utils } from 'cachefactory'\n   * const a = function (){ console.log('foo bar')}\n   * const b = { foo: \"bar\" }\n   * console.log(utils.isFunction(a)) // true\n   * console.log(utils.isFunction(b)) // false\n   *\n   * @method utils.isFunction\n   * @param {*} value The value to test.\n   * @returns {boolean} Whether the provided value is a function.\n   */isFunction:function isFunction(value){return typeof value==='function';},/**\n   * Returns whether the provided value is a number.\n   *\n   * @example\n   * import { utils } from 'js-data'\n   * const a = 1\n   * const b = -1.25\n   * const c = '1'\n   * console.log(utils.isNumber(a)) // true\n   * console.log(utils.isNumber(b)) // true\n   * console.log(utils.isNumber(c)) // false\n   *\n   * @method utils.isNumber\n   * @param {*} value The value to test.\n   * @returns {boolean} Whether the provided value is a number.\n   */isNumber:function isNumber(value){return typeof value==='number';},/**\n   * Returns whether the provided value is an object.\n   *\n   * @example\n   * import { utils } from 'cachefactory'\n   * const a = { foo: \"bar\" }\n   * const b = 'foo bar'\n   * console.log(utils.isObject(a)) // true\n   * console.log(utils.isObject(b)) // false\n   *\n   * @method utils.isObject\n   * @param {*} value The value to test.\n   * @returns {boolean} Whether the provided value is an object.\n   */isObject:function isObject(value){return value!==null&&(typeof value==='undefined'?'undefined':_typeof(value))==='object';},isPromise:function isPromise(value){return value&&utils.isFunction(value.then);},/**\n   * Returns whether the provided value is a string.\n   *\n   * @example\n   * import { utils } from 'cachefactory'\n   * console.log(utils.isString('')) // true\n   * console.log(utils.isString('my string')) // true\n   * console.log(utils.isString(100)) // false\n   * console.log(utils.isString([1,2,4])) // false\n   *\n   * @method utils.isString\n   * @param {*} value The value to test.\n   * @returns {boolean} Whether the provided value is a string.\n   */isString:function isString(value){return typeof value==='string';},/**\n   * Proxy for `JSON.stringify`.\n   *\n   * @example\n   * import { utils } from 'cachefactory'\n   *\n   * const a = { name: 'John' }\n   * console.log(utils.toJson(a)) // '{\"name\":\"John\"}'\n   *\n   * @method utils.toJson\n   * @param {*} value Value to serialize to JSON.\n   * @returns {string} JSON string.\n   * @see utils.fromJson\n   */toJson:function toJson(value){return JSON.stringify(value);},Promise:_Promise};\n\nvar assignMsg='Cannot assign to read only property';/**\n * Provide a custom storage medium, e.g. a polyfill for `localStorage`. Default: `null`.\n *\n * Must implement:\n *\n * - `setItem` - Same API as `localStorage.setItem(key, value)`\n * - `getItem` - Same API as `localStorage.getItem(key)`\n * - `removeItem` - Same API as `localStorage.removeItem(key)`\n *\n * @name Cache~StorageImpl\n * @type {object}\n * @property {function} setItem Implementation of `setItem(key, value)`.\n * @property {function} getItem Implementation of `getItem(key)`.\n * @property {function} removeItem Implementation of `removeItem(key)`.\n *//**\n * Instances of this class represent a \"cache\"—a synchronous key-value store.\n * Each instance holds the settings for the cache, and provides methods for\n * manipulating the cache and its data.\n *\n * Generally you don't creates instances of `Cache` directly, but instead create\n * instances of `Cache` via {@link CacheFactory#createCache}.\n *\n * @example\n * import CacheFactory from 'cachefactory';\n *\n * const cacheFactory = new CacheFactory();\n * const options = {...};\n * const cache = cacheFactory.createCache('my-cache', options);\n *\n * cache.put('foo', 'bar');\n * console.log(cache.get('foo')); // \"bar\"\n *\n * @class Cache\n * @param {string} id A unique identifier for the cache.\n * @param {object} [options] Configuration options.\n * @param {number} [options.cacheFlushInterval=null] See {@link Cache#cacheFlushInterval}.\n * @param {number} [options.capacity=Number.MAX_VALUE] See {@link Cache#capacity}.\n * @param {string} [options.deleteOnExpire=\"none\"] See {@link Cache#deleteOnExpire}.\n * @param {boolean} [options.enabled=true] See {@link Cache#enabled}.\n * @param {number} [options.maxAge=Number.MAX_VALUE] See {@link Cache#maxAge}.\n * @param {function} [options.onExpire=null] See {@link Cache#onExpire}.\n * @param {number} [options.recycleFreq=1000] See {@link Cache#recycleFreq}.\n * @param {Cache~StorageImpl} [options.storageImpl=null] See {@link Cache~StorageImpl}.\n * @param {string} [options.storageMode=\"memory\"] See {@link Cache#storageMode}.\n * @param {string} [options.storagePrefix=\"cachefactory.caches.\"] See {@link Cache#storagePrefix}.\n * @param {boolean} [options.storeOnReject=false] See {@link Cache#storeOnReject}.\n * @param {boolean} [options.storeOnResolve=false] See {@link Cache#storeOnResolve}.\n */var Cache=function(){function Cache(id){var _this=this;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,Cache);if(!utils.isString(id)){throw new TypeError('\"id\" must be a string!');}Object.defineProperties(this,{// Writable\n$$cacheFlushInterval:{writable:true,value:undefined},$$cacheFlushIntervalId:{writable:true,value:undefined},$$capacity:{writable:true,value:undefined},$$data:{writable:true,value:{}},$$deleteOnExpire:{writable:true,value:undefined},$$enabled:{writable:true,value:undefined},$$expiresHeap:{writable:true,value:new BinaryHeap(function(x){return x.accessed;},utils.equals)},$$initializing:{writable:true,value:true},$$lruHeap:{writable:true,value:new BinaryHeap(function(x){return x.accessed;},utils.equals)},$$maxAge:{writable:true,value:undefined},$$onExpire:{writable:true,value:undefined},$$prefix:{writable:true,value:''},$$promises:{writable:true,value:{}},$$recycleFreq:{writable:true,value:undefined},$$recycleFreqId:{writable:true,value:undefined},$$storage:{writable:true,value:undefined},$$storageMode:{writable:true,value:undefined},$$storagePrefix:{writable:true,value:undefined},$$storeOnReject:{writable:true,value:undefined},$$storeOnResolve:{writable:true,value:undefined},// Read-only\n$$parent:{value:options.parent},/**\n       * The interval (in milliseconds) on which the cache should remove all of\n       * its items. Setting this to `null` disables the interval. The default is\n       * `null`.\n       *\n       * @example <caption>Create a cache the clears itself every 15 minutes</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   cacheFlushInterval: 15 * 60 * 1000\n       * });\n       *\n       * @name Cache#cacheFlushInterval\n       * @default null\n       * @public\n       * @readonly\n       * @type {number|null}\n       */cacheFlushInterval:{enumerable:true,get:function get$$1(){return _this.$$cacheFlushInterval;},set:function set$$1(){throw new Error(assignMsg+' \\'cacheFlushInterval\\'');}},/**\n       * The maximum number of items that can be stored in the cache. When the\n       * capacity is exceeded the least recently accessed item will be removed.\n       * The default is `Number.MAX_VALUE`.\n       *\n       * @example <caption>Create a cache with a capacity of 100</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   capacity: 100\n       * });\n       *\n       * @name Cache#capacity\n       * @default Number.MAX_VALUE\n       * @public\n       * @readonly\n       * @type {number}\n       */capacity:{enumerable:true,get:function get$$1(){return _this.$$capacity;},set:function set$$1(){throw new Error(assignMsg+' \\'capacity\\'');}},/**\n       * Determines the behavior of a cache when an item expires. The default is\n       * `\"none\"`.\n       *\n       * Possible values:\n       *\n       * - `\"none\"` - Cache will do nothing when an item expires.\n       * - `\"passive\"` - Cache will do nothing when an item expires. Expired\n       * items will remain in the cache until requested, at which point they are\n       * removed, and `undefined` is returned.\n       * - `\"aggressive\"` - Cache will remove expired items as soon as they are\n       * discovered.\n       *\n       * @example <caption>Create a cache that deletes items as soon as they expire</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   deleteOnExpire: 'aggressive'\n       * });\n       *\n       * @example <caption>Create a cache that doesn't delete expired items until they're accessed</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   deleteOnExpire: 'passive'\n       * });\n       *\n       * @name Cache#deleteOnExpire\n       * @default \"none\"\n       * @public\n       * @readonly\n       * @type {string}\n       */deleteOnExpire:{enumerable:true,get:function get$$1(){return _this.$$deleteOnExpire;},set:function set$$1(){throw new Error(assignMsg+' \\'deleteOnExpire\\'');}},/**\n       * Marks whether the cache is enabled or not. For a disabled cache,\n       * {@link Cache#put} is a no-op. The default is `true`.\n       *\n       * @example <caption>Create a cache that starts out disabled</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   enabled: false\n       * });\n       *\n       * // The cache is disabled, this is a no-op\n       * cache.put('foo', 'bar');\n       * console.log(cache.get('foo')); // undefined\n       *\n       * @name Cache#enabled\n       * @default true\n       * @public\n       * @readonly\n       * @type {boolean}\n       */enabled:{enumerable:true,get:function get$$1(){return _this.$$enabled;},set:function set$$1(){throw new Error(assignMsg+' \\'enabled\\'');}},/**\n       * Then unique identifier given to this cache when it was created.\n       *\n       * @name Cache#id\n       * @public\n       * @readonly\n       * @type {string}\n       */id:{enumerable:true,value:id},/**\n       * Represents how long an item can be in the cache before expires. The\n       * cache's behavior toward expired items is determined by\n       * {@link Cache#deleteOnExpire}. The default value for `maxAge` is\n       * `Number.MAX_VALUE`.\n       *\n       * @example <caption>Create a cache where items expire after 15 minutes</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   // Items expire after 15 minutes\n       *   maxAge: 15 * 60 * 1000\n       * });\n       * const cache2 = cacheFactory.createCache('my-cache2', {\n       *   // Items expire after 15 minutes\n       *   maxAge: 15 * 60 * 1000,\n       *   // Expired items will only be deleted once they are accessed\n       *   deleteOnExpire: 'passive'\n       * });\n       * const cache3 = cacheFactory.createCache('my-cache3', {\n       *   // Items expire after 15 minutes\n       *   maxAge: 15 * 60 * 1000,\n       *   // Items will be deleted from the cache as soon as they expire\n       *   deleteOnExpire: 'aggressive'\n       * });\n       *\n       * @name Cache#maxAge\n       * @default Number.MAX_VALUE\n       * @public\n       * @readonly\n       * @type {number}\n       */maxAge:{enumerable:true,get:function get$$1(){return _this.$$maxAge;},set:function set$$1(){throw new Error(assignMsg+' \\'maxAge\\'');}},/**\n       * The `onExpire` callback.\n       *\n       * @callback Cache~onExpireCallback\n       * @param {string} key The key of the expired item.\n       * @param {*} value The value of the expired item.\n       * @param {function} [done] If in `\"passive\"` mode and you pass an\n       * `onExpire` callback to {@link Cache#get}, then the `onExpire` callback\n       * you passed to {@link Cache#get} will be passed to your global\n       * `onExpire` callback.\n       *//**\n       * A callback to be executed when expired items are removed from the\n       * cache when the cache is in `\"passive\"` or `\"aggressive\"` mode. The\n       * default is `null`. See {@link Cache~onExpireCallback} for the signature\n       * of the `onExpire` callback.\n       *\n       * @example <caption>Create a cache where items expire after 15 minutes</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   // Items expire after 15 minutes\n       *   maxAge: 15 * 60 * 1000,\n       *   // Expired items will only be deleted once they are accessed\n       *   deleteOnExpire: 'passive',\n       *   // Try to rehydrate cached items as they expire\n       *   onExpire: function (key, value, done) {\n       *     // Do something with key and value\n       *\n       *     // Will received \"done\" callback if in \"passive\" mode and passing\n       *     // an onExpire option to Cache#get.\n       *     if (done) {\n       *       done(); // You can pass whatever you want to done\n       *     }\n       *   }\n       * });\n       *\n       * @name Cache#onExpire\n       * @default null\n       * @public\n       * @readonly\n       * @see Cache~onExpireCallback\n       * @type {function}\n       */onExpire:{enumerable:true,get:function get$$1(){return _this.$$onExpire;},set:function set$$1(){throw new Error(assignMsg+' \\'onExpire\\'');}},/**\n       * The frequency (in milliseconds) with which the cache should check for\n       * expired items. The default is `1000`. The value of this interval only\n       * matters if {@link Cache#deleteOnExpire} is set to `\"aggressive\"`.\n       *\n       * @example <caption>Create a cache where items expire after 15 minutes checking every 10 seconds</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   // Items expire after 15 minutes\n       *   maxAge: 15 * 60 * 1000,\n       *   // Items will be deleted from the cache as soon as they expire\n       *   deleteOnExpire: 'aggressive',\n       *   // Check for expired items every 10 seconds\n       *   recycleFreq: 10 * 1000\n       * });\n       *\n       * @name Cache#recycleFreq\n       * @default 1000\n       * @public\n       * @readonly\n       * @type {number|null}\n       */recycleFreq:{enumerable:true,get:function get$$1(){return _this.$$recycleFreq;},set:function set$$1(){throw new Error(assignMsg+' \\'recycleFreq\\'');}},/**\n       * Determines the storage medium used by the cache. The default is\n       * `\"memory\"`.\n       *\n       * Possible values:\n       *\n       * - `\"memory\"`\n       * - `\"localStorage\"`\n       * - `\"sessionStorage\"`\n       *\n       * @example <caption>Create a cache that stores its data in localStorage</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   storageMode: 'localStorage'\n       * });\n       *\n       * @example <caption>Provide a custom storage implementation</caption>\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   storageMode: 'localStorage',\n       *   storageImpl: {\n       *     setItem: function (key, value) {\n       *       console.log('setItem', key, value);\n       *       localStorage.setItem(key, value);\n       *     },\n       *     getItem: function (key) {\n       *       console.log('getItem', key);\n       *       localStorage.getItem(key);\n       *     },\n       *     removeItem: function (key) {\n       *       console.log('removeItem', key);\n       *       localStorage.removeItem(key);\n       *     }\n       *   }\n       * });\n       *\n       * @name Cache#storageMode\n       * @default \"memory\"\n       * @public\n       * @readonly\n       * @type {string}\n       */storageMode:{enumerable:true,get:function get$$1(){return _this.$$storageMode;},set:function set$$1(){throw new Error(assignMsg+' \\'storageMode\\'');}},/**\n       * The prefix used to namespace the keys for items stored in\n       * `localStorage` or `sessionStorage`. The default is\n       * `\"cachefactory.caches.\"` which is conservatively long in order any\n       * possible conflict with other data in storage. Set to a shorter value\n       * to save storage space.\n       *\n       * @example\n       * import CacheFactory from 'cachefactory';\n       *\n       * const cacheFactory = new CacheFactory();\n       * const cache = cacheFactory.createCache('my-cache', {\n       *   storageMode: 'localStorage',\n       *   // Completely remove the prefix to save the most space\n       *   storagePrefix: ''\n       * });\n       * cache.put('foo', 'bar');\n       * console.log(localStorage.get('my-cache.data.foo')); // \"bar\"\n       *\n       * @name Cache#storagePrefix\n       * @default \"cachefactory.caches.\"\n       * @public\n       * @readonly\n       * @type {string}\n       */storagePrefix:{enumerable:true,get:function get$$1(){return _this.$$storagePrefix;},set:function set$$1(){throw new Error(assignMsg+' \\'storagePrefix\\'');}},/**\n       * If set to `true`, when a promise is inserted into the cache and is then\n       * rejected, then the rejection value will overwrite the promise in the\n       * cache. The default is `false`.\n       *\n       * @name Cache#storeOnReject\n       * @default false\n       * @public\n       * @readonly\n       * @type {boolean}\n       */storeOnReject:{enumerable:true,get:function get$$1(){return _this.$$storeOnReject;},set:function set$$1(){throw new Error(assignMsg+' \\'storeOnReject\\'');}},/**\n       * If set to `true`, when a promise is inserted into the cache and is then\n       * resolved, then the resolution value will overwrite the promise in the\n       * cache. The default is `false`.\n       *\n       * @name Cache#storeOnResolve\n       * @default false\n       * @public\n       * @readonly\n       * @type {boolean}\n       */storeOnResolve:{enumerable:true,get:function get$$1(){return _this.$$storeOnResolve;},set:function set$$1(){throw new Error(assignMsg+' \\'storeOnResolve\\'');}}});this.setOptions(options,true);this.$$initializing=false;}/**\n   * Destroys this cache and all its data and renders it unusable.\n   *\n   * @example\n   * cache.destroy();\n   *\n   * @method Cache#destroy\n   */createClass(Cache,[{key:'destroy',value:function destroy(){clearInterval(this.$$cacheFlushIntervalId);clearInterval(this.$$recycleFreqId);this.removeAll();if(this.$$storage){this.$$storage().removeItem(this.$$prefix+'.keys');this.$$storage().removeItem(this.$$prefix);}this.$$storage=null;this.$$data=null;this.$$lruHeap=null;this.$$expiresHeap=null;this.$$prefix=null;if(this.$$parent){this.$$parent.caches[this.id]=undefined;}}/**\n   * Disables this cache. For a disabled cache, {@link Cache#put} is a no-op.\n   *\n   * @example\n   * cache.disable();\n   *\n   * @method Cache#disable\n   */},{key:'disable',value:function disable(){this.$$enabled=false;}/**\n   * Enables this cache. For a disabled cache, {@link Cache#put} is a no-op.\n   *\n   * @example\n   * cache.enable();\n   *\n   * @method Cache#enable\n   */},{key:'enable',value:function enable(){this.$$enabled=true;}/**\n   * Retrieve an item from the cache, it it exists.\n   *\n   * @example <caption>Retrieve an item from the cache</caption>\n   * cache.put('foo', 'bar');\n   * cache.get('foo'); // \"bar\"\n   *\n   * @example <caption>Retrieve a possibly expired item while in passive mode</caption>\n   * import CacheFactory from 'cachefactory';\n   *\n   * const cacheFactory = new CacheFactory();\n   * const cache = cacheFactory.createCache('my-cache', {\n   *   deleteOnExpire: 'passive',\n   *   maxAge: 15 * 60 * 1000\n   * });\n   * cache.get('foo', {\n   *   // Called if \"foo\" is expired\n   *   onExpire: function (key, value) {\n   *     // Do something with key and value\n   *   }\n   * });\n   *\n   * @example <caption>Retrieve a possibly expired item while in passive mode with global onExpire callback</caption>\n   * import CacheFactory from 'cachefactory';\n   *\n   * const cacheFactory = new CacheFactory();\n   * const cache = cacheFactory.createCache('my-cache', {\n   *   deleteOnExpire: 'passive',\n   *   maxAge: 15 * 60 * 1000\n   *   onExpire: function (key, value, done) {\n   *     console.log('Expired item:', key);\n   *     if (done) {\n   *       done('foo', key, value);\n   *     }\n   *   }\n   * });\n   * cache.get('foo', {\n   *   // Called if \"foo\" is expired\n   *   onExpire: function (msg, key, value) {\n   *     console.log(msg); // \"foo\"\n   *     // Do something with key and value\n   *   }\n   * });\n   *\n   * @method Cache#get\n   * @param {string|string[]} key The key of the item to retrieve.\n   * @param {object} [options] Configuration options.\n   * @param {function} [options.onExpire] TODO\n   * @returns {*} The value for the specified `key`, if any.\n   */},{key:'get',value:function get$$1(key){var _this2=this;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(Array.isArray(key)){var keys=key;var values=[];keys.forEach(function(key){var value=_this2.get(key,options);if(value!==null&&value!==undefined){values.push(value);}});return values;}else{if(utils.isNumber(key)){key=''+key;}if(!this.enabled){return;}}if(!utils.isString(key)){throw new TypeError('\"key\" must be a string!');}else if(!options||!utils.isObject(options)){throw new TypeError('\"options\" must be an object!');}else if(options.onExpire&&!utils.isFunction(options.onExpire)){throw new TypeError('\"options.onExpire\" must be a function!');}var item=void 0;if(this.$$storage){if(this.$$promises[key]){return this.$$promises[key];}var itemJson=this.$$storage().getItem(this.$$prefix+'.data.'+key);if(itemJson){item=utils.fromJson(itemJson);}}else if(utils.isObject(this.$$data)){item=this.$$data[key];}if(!item){return;}var value=item.value;var now=new Date().getTime();if(this.$$storage){this.$$lruHeap.remove({key:key,accessed:item.accessed});item.accessed=now;this.$$lruHeap.push({key:key,accessed:now});}else{this.$$lruHeap.remove(item);item.accessed=now;this.$$lruHeap.push(item);}if(this.$$deleteOnExpire==='passive'&&'expires'in item&&item.expires<now){this.remove(key);if(this.$$onExpire){this.$$onExpire(key,item.value,options.onExpire);}else if(options.onExpire){options.onExpire.call(this,key,item.value);}value=undefined;}else if(this.$$storage){this.$$storage().setItem(this.$$prefix+'.data.'+key,utils.toJson(item));}return value;}/**\n   * Retrieve information about the whole cache or about a particular item in\n   * the cache.\n   *\n   * @example <caption>Retrieve info about the cache</caption>\n   * const info = cache.info();\n   * info.id; // \"my-cache\"\n   * info.capacity; // 100\n   * info.maxAge; // 600000\n   * info.deleteOnExpire; // \"aggressive\"\n   * info.cacheFlushInterval; // null\n   * info.recycleFreq; // 10000\n   * info.storageMode; // \"localStorage\"\n   * info.enabled; // false\n   * info.size; // 1234\n   *\n   * @example <caption>Retrieve info about an item in the cache</caption>\n   * const info = cache.info('foo');\n   * info.created; // 1234567890\n   * info.accessed; // 1234567990\n   * info.expires; // 1234569999\n   * info.isExpired; // false\n   *\n   * @method Cache#info\n   * @param {string} [key] If specified, retrieve info for a particular item in\n   * the cache.\n   * @returns {*} The information object.\n   */},{key:'info',value:function info(key){if(key){var item=void 0;if(this.$$storage){var itemJson=this.$$storage().getItem(this.$$prefix+'.data.'+key);if(itemJson){item=utils.fromJson(itemJson);}}else if(utils.isObject(this.$$data)){item=this.$$data[key];}if(item){return{created:item.created,accessed:item.accessed,expires:item.expires,isExpired:new Date().getTime()-item.created>(item.maxAge||this.$$maxAge)};}}else{return{id:this.id,capacity:this.capacity,maxAge:this.maxAge,deleteOnExpire:this.deleteOnExpire,onExpire:this.onExpire,cacheFlushInterval:this.cacheFlushInterval,recycleFreq:this.recycleFreq,storageMode:this.storageMode,storageImpl:this.$$storage?this.$$storage():undefined,enabled:this.enabled,size:this.$$lruHeap&&this.$$lruHeap.size()||0};}}/**\n   * Retrieve a list of the keys of items currently in the cache.\n   *\n   * @example\n   * const keys = cache.keys();\n   *\n   * @method Cache#keys\n   * @returns {string[]} The keys of the items in the cache\n   */},{key:'keys',value:function keys(){var _this3=this;if(this.$$storage){var keysJson=this.$$storage().getItem(this.$$prefix+'.keys');if(keysJson){return utils.fromJson(keysJson);}else{return[];}}else{return Object.keys(this.$$data).filter(function(key){return _this3.$$data[key];});}}/**\n   * Retrieve an object of the keys of items currently in the cache.\n   *\n   * @example\n   * const keySet = cache.keySet();\n   *\n   * @method Cache#keySet\n   * @returns {object} The keys of the items in the cache.\n   */},{key:'keySet',value:function keySet(){var set$$1={};this.keys().forEach(function(key){set$$1[key]=key;});return set$$1;}/**\n   * Insert an item into the cache.\n   *\n   * @example\n   * const inserted = cache.put('foo', 'bar');\n   *\n   * @method Cache#put\n   * @param {string} key The key under which to insert the item.\n   * @param {*} value The value to insert.\n   * @param {object} [options] Configuration options.\n   * @param {boolean} [options.storeOnReject] See {@link Cache#storeOnReject}.\n   * @param {boolean} [options.storeOnResolve] See {@link Cache#storeOnResolve}.\n   * @returns {*} The inserted value.\n   */},{key:'put',value:function put(key,value){var _this4=this;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var storeOnResolve=options.storeOnResolve!==undefined?!!options.storeOnResolve:this.$$storeOnResolve;var storeOnReject=options.storeOnReject!==undefined?!!options.storeOnReject:this.$$storeOnReject;var getHandler=function getHandler(shouldStore,isError){return function(v){if(shouldStore){_this4.$$promises[key]=undefined;if(utils.isObject(v)&&'status'in v&&'data'in v){_this4.put(key,[v.status,v.data,v.headers(),v.statusText]);}else{_this4.put(key,v);}}if(isError){if(utils.Promise){return utils.Promise.reject(v);}else{throw v;}}else{return v;}};};if(!this.$$enabled||!utils.isObject(this.$$data)||value===null||value===undefined){return;}if(utils.isNumber(key)){key=''+key;}if(!utils.isString(key)){throw new TypeError('\"key\" must be a string!');}var now=new Date().getTime();var item={key:key,value:utils.isPromise(value)?value.then(getHandler(storeOnResolve,false),getHandler(storeOnReject,true)):value,created:options.created===undefined?now:options.created,accessed:options.accessed===undefined?now:options.accessed};if(utils.isNumber(options.maxAge)){item.maxAge=options.maxAge;}if(options.expires===undefined){item.expires=item.created+(item.maxAge||this.$$maxAge);}else{item.expires=options.expires;}if(this.$$storage){if(utils.isPromise(item.value)){this.$$promises[key]=item.value;return this.$$promises[key];}var keysJson=this.$$storage().getItem(this.$$prefix+'.keys');var keys=keysJson?utils.fromJson(keysJson):[];var itemJson=this.$$storage().getItem(this.$$prefix+'.data.'+key);// Remove existing\nif(itemJson){this.remove(key);}// Add to expires heap\nthis.$$expiresHeap.push({key:key,expires:item.expires});// Add to lru heap\nthis.$$lruHeap.push({key:key,accessed:item.accessed});// Set item\nthis.$$storage().setItem(this.$$prefix+'.data.'+key,utils.toJson(item));var exists=false;keys.forEach(function(_key){if(_key===key){exists=true;return false;}});if(!exists){keys.push(key);}this.$$storage().setItem(this.$$prefix+'.keys',utils.toJson(keys));}else{// Remove existing\nif(this.$$data[key]){this.remove(key);}// Add to expires heap\nthis.$$expiresHeap.push(item);// Add to lru heap\nthis.$$lruHeap.push(item);// Set item\nthis.$$data[key]=item;this.$$promises[key]=undefined;}// Handle exceeded capacity\nif(this.$$lruHeap.size()>this.$$capacity){this.remove(this.$$lruHeap.peek().key);}return value;}/**\n   * Remove an item from the cache.\n   *\n   * @example\n   * const removed = cache.remove('foo');\n   *\n   * @method Cache#remove\n   * @param {string} key The key of the item to remove.\n   * @returns {*} The value of the removed item, if any.\n   */},{key:'remove',value:function remove(key){if(utils.isNumber(key)){key=''+key;}this.$$promises[key]=undefined;if(this.$$storage){var itemJson=this.$$storage().getItem(this.$$prefix+'.data.'+key);if(itemJson){var item=utils.fromJson(itemJson);this.$$lruHeap.remove({key:key,accessed:item.accessed});this.$$expiresHeap.remove({key:key,expires:item.expires});this.$$storage().removeItem(this.$$prefix+'.data.'+key);var keysJson=this.$$storage().getItem(this.$$prefix+'.keys');var keys=keysJson?utils.fromJson(keysJson):[];var index=keys.indexOf(key);if(index>=0){keys.splice(index,1);}this.$$storage().setItem(this.$$prefix+'.keys',utils.toJson(keys));return item.value;}}else if(utils.isObject(this.$$data)){var value=this.$$data[key]?this.$$data[key].value:undefined;this.$$lruHeap.remove(this.$$data[key]);this.$$expiresHeap.remove(this.$$data[key]);this.$$data[key]=undefined;return value;}}/**\n   * Remove all items from the cache.\n   *\n   * @example\n   * cache.removeAll();\n   *\n   * @method Cache#removeAll\n   */},{key:'removeAll',value:function removeAll(){var _this5=this;var storage=this.$$storage;var keys=this.keys();this.$$lruHeap.removeAll();this.$$expiresHeap.removeAll();if(storage){storage().setItem(this.$$prefix+'.keys',utils.toJson([]));keys.forEach(function(key){storage().removeItem(_this5.$$prefix+'.data.'+key);});}else if(utils.isObject(this.$$data)){this.$$data={};}this.$$promises={};}/**\n   * Remove expired items from the cache, if any.\n   *\n   * @example\n   * const expiredItems = cache.removeExpired();\n   *\n   * @method Cache#removeExpired\n   * @returns {object} The expired items, if any.\n   */},{key:'removeExpired',value:function removeExpired(){var _this6=this;var now=new Date().getTime();var expired={};var expiredItem=void 0;while((expiredItem=this.$$expiresHeap.peek())&&expiredItem.expires<=now){expired[expiredItem.key]=expiredItem.value?expiredItem.value:null;this.$$expiresHeap.pop();}Object.keys(expired).forEach(function(key){_this6.remove(key);});if(this.$$onExpire){Object.keys(expired).forEach(function(key){_this6.$$onExpire(key,expired[key]);});}return expired;}/**\n   * Update the {@link Cache#cacheFlushInterval} for the cache. Pass in `null`\n   * to disable the interval.\n   *\n   * @example\n   * cache.setCacheFlushInterval(60 * 60 * 1000);\n   *\n   * @method Cache#setCacheFlushInterval\n   * @param {number|null} cacheFlushInterval The new {@link Cache#cacheFlushInterval}.\n   */},{key:'setCacheFlushInterval',value:function setCacheFlushInterval(cacheFlushInterval){var _this7=this;if(cacheFlushInterval===null){this.$$cacheFlushInterval=null;}else if(!utils.isNumber(cacheFlushInterval)){throw new TypeError('\"cacheFlushInterval\" must be a number!');}else if(cacheFlushInterval<=0){throw new Error('\"cacheFlushInterval\" must be greater than zero!');}this.$$cacheFlushInterval=cacheFlushInterval;clearInterval(this.$$cacheFlushIntervalId);this.$$cacheFlushIntervalId=undefined;if(this.$$cacheFlushInterval){this.$$cacheFlushIntervalId=setInterval(function(){return _this7.removeAll();},this.$$cacheFlushInterval);}}/**\n   * Update the {@link Cache#capacity} for the cache. Pass in `null` to reset\n   * to `Number.MAX_VALUE`.\n   *\n   * @example\n   * cache.setCapacity(1000);\n   *\n   * @method Cache#setCapacity\n   * @param {number|null} capacity The new {@link Cache#capacity}.\n   */},{key:'setCapacity',value:function setCapacity(capacity){if(capacity===null){this.$$capacity=Number.MAX_VALUE;}else if(!utils.isNumber(capacity)){throw new TypeError('\"capacity\" must be a number!');}else if(capacity<=0){throw new Error('\"capacity\" must be greater than zero!');}else{this.$$capacity=capacity;}var removed={};while(this.$$lruHeap.size()>this.$$capacity){removed[this.$$lruHeap.peek().key]=this.remove(this.$$lruHeap.peek().key);}return removed;}/**\n   * Update the {@link Cache#deleteOnExpire} for the cache. Pass in `null` to\n   * reset to `\"none\"`.\n   *\n   * @example\n   * cache.setDeleteOnExpire('passive');\n   *\n   * @method Cache#setDeleteOnExpire\n   * @param {string|null} deleteOnExpire The new {@link Cache#deleteOnExpire}.\n   */},{key:'setDeleteOnExpire',value:function setDeleteOnExpire(deleteOnExpire,setRecycleFreq){if(deleteOnExpire===null){deleteOnExpire='none';}else if(!utils.isString(deleteOnExpire)){throw new TypeError('\"deleteOnExpire\" must be a string!');}else if(deleteOnExpire!=='none'&&deleteOnExpire!=='passive'&&deleteOnExpire!=='aggressive'){throw new Error('\"deleteOnExpire\" must be \"none\", \"passive\" or \"aggressive\"!');}this.$$deleteOnExpire=deleteOnExpire;if(setRecycleFreq!==false){this.setRecycleFreq(this.$$recycleFreq);}}/**\n   * Update the {@link Cache#maxAge} for the cache. Pass in `null` to reset to\n   * to `Number.MAX_VALUE`.\n   *\n   * @example\n   * cache.setMaxAge(60 * 60 * 1000);\n   *\n   * @method Cache#setMaxAge\n   * @param {number|null} maxAge The new {@link Cache#maxAge}.\n   */},{key:'setMaxAge',value:function setMaxAge(maxAge){var _this8=this;if(maxAge===null){this.$$maxAge=Number.MAX_VALUE;}else if(!utils.isNumber(maxAge)){throw new TypeError('\"maxAge\" must be a number!');}else if(maxAge<=0){throw new Error('\"maxAge\" must be greater than zero!');}else{this.$$maxAge=maxAge;}var keys=this.keys();this.$$expiresHeap.removeAll();if(this.$$storage){keys.forEach(function(key){var itemJson=_this8.$$storage().getItem(_this8.$$prefix+'.data.'+key);if(itemJson){var item=utils.fromJson(itemJson);if(_this8.$$maxAge===Number.MAX_VALUE){item.expires=Number.MAX_VALUE;}else{item.expires=item.created+(item.maxAge||_this8.$$maxAge);}_this8.$$expiresHeap.push({key:key,expires:item.expires});}});}else{keys.forEach(function(key){var item=_this8.$$data[key];if(item){if(_this8.$$maxAge===Number.MAX_VALUE){item.expires=Number.MAX_VALUE;}else{item.expires=item.created+(item.maxAge||_this8.$$maxAge);}_this8.$$expiresHeap.push(item);}});}if(this.$$deleteOnExpire==='aggressive'){return this.removeExpired();}else{return{};}}/**\n   * Update the {@link Cache#onExpire} for the cache. Pass in `null` to unset\n   * the global `onExpire` callback of the cache.\n   *\n   * @example\n   * cache.setOnExpire(function (key, value, done) {\n   *   // Do something\n   * });\n   *\n   * @method Cache#setOnExpire\n   * @param {function|null} onExpire The new {@link Cache#onExpire}.\n   */},{key:'setOnExpire',value:function setOnExpire(onExpire){if(onExpire===null){this.$$onExpire=null;}else if(!utils.isFunction(onExpire)){throw new TypeError('\"onExpire\" must be a function!');}else{this.$$onExpire=onExpire;}}/**\n   * Update multiple cache options at a time.\n   *\n   * @example\n   * cache.setOptions({\n   *   maxAge: 60 * 60 * 1000,\n   *   deleteOnExpire: 'aggressive'\n   * });\n   *\n   * @example <caption>Set two options, and reset the rest to the configured defaults</caption>\n   * cache.setOptions({\n   *   maxAge: 60 * 60 * 1000,\n   *   deleteOnExpire: 'aggressive'\n   * }, true);\n   *\n   * @method Cache#setOptions\n   * @param {object} options The options to set.\n   * @param {boolean} [strict] Reset options not passed to `options` to the\n   * configured defaults.\n   */},{key:'setOptions',value:function setOptions(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var strict=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!utils.isObject(options)){throw new TypeError('\"options\" must be an object!');}if(options.storagePrefix!==undefined){this.$$storagePrefix=options.storagePrefix;}else if(strict){this.$$storagePrefix=defaults$1.storagePrefix;}this.$$prefix=this.$$storagePrefix+this.id;if(options.enabled!==undefined){this.$$enabled=!!options.enabled;}else if(strict){this.$$enabled=defaults$1.enabled;}if(options.deleteOnExpire!==undefined){this.setDeleteOnExpire(options.deleteOnExpire,false);}else if(strict){this.setDeleteOnExpire(defaults$1.deleteOnExpire,false);}if(options.recycleFreq!==undefined){this.setRecycleFreq(options.recycleFreq);}else if(strict){this.setRecycleFreq(defaults$1.recycleFreq);}if(options.maxAge!==undefined){this.setMaxAge(options.maxAge);}else if(strict){this.setMaxAge(defaults$1.maxAge);}if(options.storeOnResolve!==undefined){this.$$storeOnResolve=!!options.storeOnResolve;}else if(strict){this.$$storeOnResolve=defaults$1.storeOnResolve;}if(options.storeOnReject!==undefined){this.$$storeOnReject=!!options.storeOnReject;}else if(strict){this.$$storeOnReject=defaults$1.storeOnReject;}if(options.capacity!==undefined){this.setCapacity(options.capacity);}else if(strict){this.setCapacity(defaults$1.capacity);}if(options.cacheFlushInterval!==undefined){this.setCacheFlushInterval(options.cacheFlushInterval);}else if(strict){this.setCacheFlushInterval(defaults$1.cacheFlushInterval);}if(options.onExpire!==undefined){this.setOnExpire(options.onExpire);}else if(strict){this.setOnExpire(defaults$1.onExpire);}if(options.storageMode!==undefined||options.storageImpl!==undefined){this.setStorageMode(options.storageMode||defaults$1.storageMode,options.storageImpl||defaults$1.storageImpl);}else if(strict){this.setStorageMode(defaults$1.storageMode,defaults$1.storageImpl);}}/**\n   * Update the {@link Cache#recycleFreq} for the cache. Pass in `null` to\n   * disable the interval.\n   *\n   * @example\n   * cache.setRecycleFreq(10000);\n   *\n   * @method Cache#setRecycleFreq\n   * @param {number|null} recycleFreq The new {@link Cache#recycleFreq}.\n   */},{key:'setRecycleFreq',value:function setRecycleFreq(recycleFreq){var _this9=this;if(recycleFreq===null){this.$$recycleFreq=null;}else if(!utils.isNumber(recycleFreq)){throw new TypeError('\"recycleFreq\" must be a number!');}else if(recycleFreq<=0){throw new Error('\"recycleFreq\" must be greater than zero!');}else{this.$$recycleFreq=recycleFreq;}clearInterval(this.$$recycleFreqId);if(this.$$deleteOnExpire==='aggressive'&&this.$$recycleFreq){this.$$recycleFreqId=setInterval(function(){return _this9.removeExpired();},this.$$recycleFreq);}else{this.$$recycleFreqId=undefined;}}/**\n   * Update the {@link Cache#storageMode} for the cache.\n   *\n   * @method Cache#setStorageMode\n   * @param {string} storageMode The new {@link Cache#storageMode}.\n   * @param {object} storageImpl The new {@link Cache~StorageImpl}.\n   */},{key:'setStorageMode',value:function setStorageMode(storageMode,storageImpl){var _this10=this;if(!utils.isString(storageMode)){throw new TypeError('\"storageMode\" must be a string!');}else if(storageMode!=='memory'&&storageMode!=='localStorage'&&storageMode!=='sessionStorage'){throw new Error('\"storageMode\" must be \"memory\", \"localStorage\", or \"sessionStorage\"!');}var prevStorage=this.$$storage;var prevData=this.$$data;var shouldReInsert=false;var items={};var load=function load(prevStorage,prevData){var keys=_this10.keys();var prevDataIsObject=utils.isObject(prevData);keys.forEach(function(key){if(prevStorage){var itemJson=prevStorage().getItem(_this10.$$prefix+'.data.'+key);if(itemJson){items[key]=utils.fromJson(itemJson);}}else if(prevDataIsObject){items[key]=prevData[key];}_this10.remove(key);shouldReInsert||(shouldReInsert=true);});};if(!this.$$initializing){load(prevStorage,prevData);}this.$$storageMode=storageMode;if(storageImpl){if(!utils.isObject(storageImpl)){throw new TypeError('\"storageImpl\" must be an object!');}else if(typeof storageImpl.setItem!=='function'){throw new Error('\"storageImpl\" must implement \"setItem(key, value)\"!');}else if(typeof storageImpl.getItem!=='function'){throw new Error('\"storageImpl\" must implement \"getItem(key)\"!');}else if(typeof storageImpl.removeItem!=='function'){throw new Error('\"storageImpl\" must implement \"removeItem(key)\"!');}this.$$storage=function(){return storageImpl;};}else if(this.$$storageMode==='localStorage'){try{localStorage.setItem('cachefactory','cachefactory');localStorage.removeItem('cachefactory');this.$$storage=function(){return localStorage;};}catch(e){this.$$storage=null;this.$$storageMode='memory';}}else if(this.$$storageMode==='sessionStorage'){try{sessionStorage.setItem('cachefactory','cachefactory');sessionStorage.removeItem('cachefactory');this.$$storage=function(){return sessionStorage;};}catch(e){this.$$storage=null;this.$$storageMode='memory';}}else{this.$$storage=null;this.$$storageMode='memory';}if(this.$$initializing){load(this.$$storage,this.$$data);}if(shouldReInsert){Object.keys(items).forEach(function(key){var item=items[key];_this10.put(key,item.value,{created:item.created,accessed:item.accessed,expires:item.expires});});}}/**\n   * Reset an item's age in the cache, or if `key` is unspecified, touch all\n   * items in the cache.\n   *\n   * @example\n   * cache.touch('foo');\n   *\n   * @method Cache#touch\n   * @param {string} [key] The key of the item to touch.\n   * @param {object} [options] Options to pass to {@link Cache#put} if\n   * necessary.\n   */},{key:'touch',value:function touch(key,options){var _this11=this;if(key){var val=this.get(key,{onExpire:function onExpire(k,v){return _this11.put(k,v);}});if(val){this.put(key,val,options);}}else{var keys=this.keys();for(var i=0;i<keys.length;i++){this.touch(keys[i],options);}}}/**\n   * Retrieve the values of all items in the cache.\n   *\n   * @example\n   * const values = cache.values();\n   *\n   * @method Cache#values\n   * @returns {array} The values of the items in the cache.\n   */},{key:'values',value:function values(){var _this12=this;return this.keys().map(function(key){return _this12.get(key);});}}]);return Cache;}();\n\nvar CacheFactory=function(){function CacheFactory(){classCallCheck(this,CacheFactory);Object.defineProperty(this,'caches',{writable:true,value:{}});}/**\n   * Calls {@link Cache#removeAll} on each {@link Cache} in this\n   * {@link CacheFactory}.\n   *\n   * @example\n   * cacheFactory.clearAll();\n   *\n   * @method CacheFactory#clearAll\n   */createClass(CacheFactory,[{key:'clearAll',value:function clearAll(){var _this=this;this.keys().forEach(function(cacheId){_this.get(cacheId).removeAll();});}/**\n   * Create a new {@link Cache}. If a cache with the same `id` had been created\n   * in a previous browser session, then it will attempt to load any data that\n   * had been saved previously.\n   *\n   * @example\n   * import CacheFactory from 'cachefactory';\n   *\n   * const cacheFactory = new CacheFactory();\n   * const options = {...};\n   * const cache = cacheFactory.createCache('my-cache', options);\n   *\n   * cache.put('foo', 'bar');\n   * console.log(cache.get('foo')); // \"bar\"\n   *\n   * @method CacheFactory#createCache\n   * @param {string} id A unique identifier for the new {@link Cache}.\n   * @param {object} [options] Configuration options. See {@link Cache}.\n   * @returns {Cache} The new {@link Cache} instance.\n   */},{key:'createCache',value:function createCache(id){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.caches[id]){throw new Error('cache \"'+id+'\" already exists!');}options.parent=this;this.caches[id]=new CacheFactory.Cache(id,options);return this.caches[id];}/**\n   * Calls {@link Cache#destroy} on the {@link Cache} in this\n   * {@link CacheFactory} that has the specified `id`.\n   *\n   * @example\n   * cacheFactory.destroy('my-cache');\n   *\n   * @method CacheFactory#destroy\n   * @param {string} id TODO\n   */},{key:'destroy',value:function destroy(id){this.get(id).destroy();this.caches[id]=undefined;}/**\n   * Calls {@link Cache#destroy} on each {@link Cache} in this\n   * {@link CacheFactory}.\n   *\n   * @example\n   * cacheFactory.destroyAll();\n   *\n   * @method CacheFactory#destroyAll\n   */},{key:'destroyAll',value:function destroyAll(){var _this2=this;this.keys().forEach(function(id){_this2.get(id).destroy();});this.caches={};}/**\n   * Calls {@link Cache#disable} on each {@link Cache} in this\n   * {@link CacheFactory}.\n   *\n   * @example\n   * cacheFactory.disableAll();\n   *\n   * @method CacheFactory#disableAll\n   */},{key:'disableAll',value:function disableAll(){var _this3=this;this.keys().forEach(function(cacheId){_this3.get(cacheId).disable();});}/**\n   * Calls {@link Cache#enable} on each {@link Cache} in this\n   * {@link CacheFactory}.\n   *\n   * @example\n   * cacheFactory.enableAll();\n   *\n   * @method CacheFactory#enableAll\n   */},{key:'enableAll',value:function enableAll(){var _this4=this;this.keys().forEach(function(cacheId){_this4.get(cacheId).enable();});}/**\n   * Returns whether the {@link Cache} with the specified `id` exists in this\n   * {@link CacheFactory}.\n   *\n   * @example\n   * const exists = cacheFactory.exists('my-cache');\n   *\n   * @method CacheFactory#exists\n   * @returns {boolean} Whether the {@link Cache} with the specified `id` exists\n   * in this {@link CacheFactory}.\n   */},{key:'exists',value:function exists(id){return!!this.caches[id];}/**\n   * Returns a reference to the {@link Cache} in this {@link CacheFactory} that\n   * has the specified `id`.\n   *\n   * @example\n   * const cache = cacheFactory.get('my-cache');\n   *\n   * @method CacheFactory#get\n   * @param {string} id The `id` of the {@link Cache} to retrieve.\n   * @returns {Cache} The {@link Cache} instance.\n   * @throws {ReferenceError} Throws a `ReferenceError` if the {@link Cache}\n   * does not exist.\n   */},{key:'get',value:function get$$1(id){var cache=this.caches[id];if(!cache){throw new ReferenceError('Cache \"'+id+'\" does not exist!');}return cache;}/**\n   * Returns information on this {@link CacheFactory} and its {@link Cache}\n   * instance.\n   *\n   * @example\n   * const info = cacheFactory.info();\n   * info.size; // 3\n   * info.caches['my-cache']; // { size: 1234, ... }\n   * info.caches['my-cache2']; // { size: 51, ... }\n   * info.caches['my-cache3']; // { size: 43, ... }\n   *\n   * @method CacheFactory#info\n   * @returns {object} The detailed information.\n   */},{key:'info',value:function info(){var _this5=this;var keys=this.keys();var info={size:keys.length,caches:{}};keys.forEach(function(cacheId){info.caches[cacheId]=_this5.get(cacheId).info();});Object.keys(defaults$1).forEach(function(key,value){info[key]=defaults$1[key];});return info;}/**\n   * Returns an array of identifiers of the {@link Cache} instances in this\n   * {@link CacheFactory}.\n   *\n   * @example\n   * const keys = cacheFactory.keys();\n   *\n   * @method CacheFactory#keys\n   * @returns {string[]} The {@link Cache} identifiers.\n   */},{key:'keys',value:function keys(){var _this6=this;return Object.keys(this.caches).filter(function(key){return _this6.caches[key];});}/**\n   * Returns an object of key-value pairs representing the identifiers of the\n   * {@link Cache} instances in this {@link CacheFactory}.\n   *\n   * @example\n   * const keySet = cacheFactory.keySet();\n   *\n   * @method CacheFactory#keySet\n   * @returns {object} The {@link Cache} identifiers.\n   */},{key:'keySet',value:function keySet(){var set$$1={};this.keys().forEach(function(key){set$$1[key]=key;});return set$$1;}/**\n   * Calls {@link Cache#removeExpired} on each {@link Cache} in this\n   * {@link CacheFactory} and returns the removed items, if any.\n   *\n   * @example\n   * const expired = cacheFactory.removeExpiredFromAll();\n   *\n   * @method CacheFactory#removeExpiredFromAll\n   * @returns {object} The removed items, if any.\n   */},{key:'removeExpiredFromAll',value:function removeExpiredFromAll(){var _this7=this;var expired={};this.keys().forEach(function(id){expired[id]=_this7.get(id).removeExpired();});return expired;}/**\n   * Calls {@link Cache#touch} on each {@link Cache} in this\n   * {@link CacheFactory}.\n   *\n   * @example\n   * cacheFactory.touchAll();\n   *\n   * @method CacheFactory#touchAll\n   */},{key:'touchAll',value:function touchAll(){var _this8=this;this.keys().forEach(function(cacheId){_this8.get(cacheId).touch();});}}]);return CacheFactory;}();\n\nCacheFactory.Cache=Cache;\n\nexport { CacheFactory, BinaryHeap, Cache, defaults$1 as defaults, utils };\n//# sourceMappingURL=cachefactory.es2015.js.map\n","import angular from 'angular'\nimport { BinaryHeap, CacheFactory, defaults, utils } from 'cachefactory'\n\nutils.equals = angular.equals\nutils.isObject = angular.isObject\nutils.fromJson = angular.fromJson\n\nfunction BinaryHeapProvider () {\n  this.$get = function () { return BinaryHeap }\n}\n\nfunction CacheFactoryProvider () {\n  this.defaults = defaults\n  this.defaults.storagePrefix = 'angular-cache.caches.'\n\n  this.$get = [\n    '$q', function ($q) {\n      utils.Promise = $q\n      return new CacheFactory()\n    }\n  ]\n}\n\nangular.module('angular-cache', [])\n       .provider('BinaryHeap', BinaryHeapProvider)\n       .provider('CacheFactory', CacheFactoryProvider)\n\nexport default 'angular-cache'\n"],"names":["_typeof","Symbol","babelHelpers.typeof","iterator","obj","constructor","prototype","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","bubbleUp","heap","weightFunc","n","element","weight","parentN","Math","floor","parent","bubbleDown","node","nodeWeight","child2N","child1N","swap","child1","child1Weight","child2","child2Weight","BinaryHeap","compareFunc","x","y","Error","value","push","peek","pop","front","end","remove","removed","removeAll","size","defaults$1","capacity","Number","MAX_VALUE","cacheFlushInterval","deleteOnExpire","enabled","onExpire","maxAge","recycleFreq","storageMode","storageImpl","storagePrefix","storeOnReject","storeOnResolve","_Promise","window","Promise","e","utils","equals","a","b","fromJson","JSON","parse","isFunction","isNumber","isObject","isPromise","then","isString","toJson","stringify","assignMsg","Cache","id","_this","options","arguments","undefined","$$cacheFlushIntervalId","$$capacity","$$data","$$deleteOnExpire","$$enabled","$$expiresHeap","accessed","$$initializing","$$lruHeap","$$maxAge","$$onExpire","$$prefix","$$promises","$$recycleFreq","$$recycleFreqId","$$storage","$$storageMode","$$storagePrefix","$$storeOnReject","$$storeOnResolve","get","get$$1","$$cacheFlushInterval","set","set$$1","setOptions","destroy","clearInterval","removeItem","$$parent","caches","disable","enable","_this2","Array","isArray","keys","values","forEach","item","itemJson","getItem","now","Date","getTime","expires","call","setItem","info","created","isExpired","_this3","keysJson","Object","filter","keySet","put","_this4","getHandler","shouldStore","isError","v","status","data","headers","statusText","reject","exists","_key","index","indexOf","splice","_this5","storage","removeExpired","_this6","expired","expiredItem","setCacheFlushInterval","_this7","setInterval","setCapacity","setDeleteOnExpire","setRecycleFreq","setMaxAge","_this8","setOnExpire","strict","setStorageMode","_this9","_this10","prevStorage","prevData","shouldReInsert","items","load","prevDataIsObject","localStorage","sessionStorage","touch","_this11","val","k","_this12","map","CacheFactory","clearAll","cacheId","createCache","destroyAll","disableAll","enableAll","cache","ReferenceError","removeExpiredFromAll","touchAll","angular","BinaryHeapProvider","$get","CacheFactoryProvider","defaults","$q","module","provider"],"mappings":"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"}